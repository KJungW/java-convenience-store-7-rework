# java-convenience-store-7-rework

## :sparkling_heart: 프로젝트 소개

웹 백엔드 7기 프리코스 4주차 과제인 편의점 프로그램을 연습삼아 다시 개발해본 프로젝트입니다.

## :dart: 구현 기능 목록

### 프로모션 데이터 초기화하기

- 다음 경로의 파일 읽기
    ```
    src/main/resources/promotions.md
    ```
- 읽은 파일의 첫 부분에 존재하는 헤더 정보 제거하기
    ```
    name,buy,get,start_date,end_date
    ```
- 입력된 데이터가 올바른지 검증하고 파싱하기
    ```
    {프로모션 이름},{구매개수},{증정개수},{시작일},{종료일}
    ```
- 프로모션 저장소에 저장하기

### 제품 데이터 초기화하기

- 다음 경로의 파일 읽기
    ```
    src/main/resources/products.md
    ```
- 읽은 파일의 첫 부분에 존재하는 헤더 정보 제거하기
    ```
    name,price,quantity,promotion
    ```
- 입력된 데이터가 올바른지 검증하고 파싱하기
    ```
    {상품 이름},{가격},{수량},{프로모션}
    ```
- 상품 저장소에 저장하기

### 환영인사 출력하기

- 다음과 같은 환영인사 출력하기

    ```
    안녕하세요. W편의점입니다.
    ```

### 편의점의 상품 목록 출력하기

- 상품의 목록을 다음과 같은 형식으로 출력한다.
    ```
    현재 보유하고 있는 상품입니다.
   
    - 콜라 1,000원 10개 탄산2+1
    - 콜라 1,000원 10개
    - 사이다 1,000원 8개 탄산2+1
    - 사이다 1,000원 7개
    - 오렌지주스 1,800원 9개 MD추천상품
    - 오렌지주스 1,800원 재고 없음
    - 탄산수 1,200원 5개 탄산2+1 
    - 탄산수 1,200원 재고 없음
    - 물 500원 10개
    - 비타민워터 1,500원 6개
    - 감자칩 1,500원 5개 반짝할인
    - 감자칩 1,500원 5개
    - 초코바 1,200원 5개 MD추천상품
    - 초코바 1,200원 5개
    - 에너지바 2,000원 5개
    - 정식도시락 6,400원 8개
    - 컵라면 1,700원 1개 MD추천상품
    - 컵라면 1,700원 10개 
    ```
- 재고가 없는 경우에는 다음과 같이 재고 없음이 출력된다.
    ```
    - 탄산수 1,200원 재고 없음
    ```

### 구매할 상품과 수량을 입력받는다.

- 안내 문구를 출력한다.
    ```
    구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
    ```
- 다음과 같은 형식으로 구매할 상품과 수량 목록을 입력받는다.
    ```
    [콜라-10],[사이다-3]
    ```
- 예외상황
    - 형식에 맞지 않는 경우, 오류 메세지 출력 후 재입력받는다.
    ```
    [ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.
    ```
    - 존재하지 않는 상품의 경우, 오류 메세지 출력 후 재입력받는다.
    ```
    [ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.
    ```
    - 구매 수량이 재고 수량을 넘긴 경우, 오류 메세지 출력 후 재입력받는다.
    ```
    [ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.
    ```
    - 기타 잘못된 입력의 경우, 오류 메세지 출력 후 재입력받는다.
    ```
    [ERROR] 잘못된 입력입니다. 다시 입력해 주세요.
    ```

### 장바구니를 채운다.

- 입력받은 구매할 상품명에 해당하는 상품이 존재하는지 체크
- 입력받은 구매할 상품 수량에 해당하는 상품 수량이 충분한지 체크
- 입려받은 구매 상품과 수량을 가지고 장바구니를 채운다.

### 추가 증정 상품을 장바구니에 추가할지 여부를 입력받고 처리한다.

- 장바구니에 추가적으로 받을 수 있는 증정 상품이 존재하는 경우를 확인
- 추가적인 증정 상품이 존재하는 경우에만 상품 별로 증정 상품 추가 여부를 입력받는다.
- 다음과 같은 형식의 안내 메세지를 출력한다.
    ```
    현재 오렌지주스은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
    ```
- 답을 입력받는다.
    - Y: 증정 받을 수 있는 상품을 장바구니 추가한다.
    - N: 증정 받을 수 있는 상품을 장바구니에 추가하지 않는다.
- 예외상황
    ```
    [ERROR] 형식에 맞지 않는 입력입니다. 'Y'나 'N'으로 다시 입력해 주세요.
    ```

### 프로모션 상품의 수량 부족으로 일부 수량에 대해 일반 결제를 할지 여부를 입력받고 처리한다.

- 수량이 부족해 일부 수량에 프로모션 혜택없이 일반 결제를 해야할 경우에만 상품 별로 일반 결제 여부를 입력받는다.
- 다음과 같은 형식의 안내 메세지를 출력한다.
    ```
    현재 콜라 4개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
    ```
- 답을 입력받는다.
    - Y: 장바구니에 해당 프로모션 상품의 수량을 차감하고, 일반 수량을 추가한다.
    - N: 장바구니에 해당 프로모션 상품의 수량을 차감한다.
- 예외상황
    ```
    [ERROR] 형식에 맞지 않는 입력입니다. 'Y'나 'N'으로 다시 입력해 주세요.
    ```

### 멤버십 할인 적용 여부를 입력받고 처리한다.

- 다음과 같은 형식의 안내 메세지를 출력한다.
    ```
    멤버십 할인을 받으시겠습니까? (Y/N)
    ```
- 답을 입력받는다.
    - Y: 멤버십 할인을 적용한다.
    - N: 멤버십 할인을 적용하지 않는다.
- 예외상황
    ```
    [ERROR] 형식에 맞지 않는 입력입니다. 'Y'나 'N'으로 다시 입력해 주세요.
    ```

### 장바구니에 있는 상품을 구매한다.

- 프로모션 할인을 적용한다.
- 멤버십 할인이 필요한 경우, 멤버십 할인을 적용한다.
- 구매정보와 가격을 정리해서 영수증으로 만든다.
- 장바구니에 있는 상품을 창고에서 차감한다.
- 장바구니를 비운다.

### 멤버십 할인을 적용한다.

- 프로모션이 적용되지 않은 상품에 대해서만 멤버십 할인을 적용한다.
- 멤버십 할인의 양은 30%이다.
- 멤버십 할인의 최대한도는 8,000원이다.

### 영수증을 출력한다.

- 영수증 정보를 바탕으로 다음과 같은 형식을 출력한다.
    ```
    ==============W 편의점================
    상품명		수량	금액
    콜라		10 	10,000
    =============증	정===============
    콜라		2
    ====================================
    총구매액		10	10,000
    행사할인			-2,000
    멤버십할인		-0
    내실돈			8,000
    ```

### 추가 구매 여부를 입력받는다.

- 다음과 같은 안내문구를 출력한다.
    ```
    감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
    ```
- 답을 입력받는다.
    - Y: 구매를 다시 진행한다.
    - N: 프로그램 종료
- 예외상황
    ```
    [ERROR] 형식에 맞지 않는 입력입니다. 'Y'나 'N'으로 다시 입력해 주세요.
    ```

## :eyes: 전체적인 실행 과정

```
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 5개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-3],[에너지바-5]

멤버십 할인을 받으시겠습니까? (Y/N)
Y 

==============W 편의점================
상품명		수량	금액
콜라		3 	3,000
에너지바 		5 	10,000
=============증	정===============
콜라		1
====================================
총구매액		8	13,000
행사할인			-1,000
멤버십할인			-3,000
내실돈			 9,000

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y

안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 7개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 재고 없음
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-10]

현재 콜라 4개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
Y

멤버십 할인을 받으시겠습니까? (Y/N)
N

==============W 편의점================
상품명		수량	금액
콜라		10 	10,000
=============증	정===============
콜라		2
====================================
총구매액		10	10,000
행사할인			-2,000
멤버십할인			-0
내실돈			 8,000

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y

안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 재고 없음 탄산2+1
- 콜라 1,000원 7개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 재고 없음
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[오렌지주스-1]

현재 오렌지주스은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
Y

멤버십 할인을 받으시겠습니까? (Y/N)
Y

==============W 편의점================
상품명		수량	금액
오렌지주스	2 	3,600
=============증	정===============
오렌지주스	1
====================================
총구매액		2	3,600
행사할인			-1,800
멤버십할인		-0
내실돈			1,800

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
N
```
